{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useParams,useNavigate}from'react-router-dom';import IconButton from'@mui/material/IconButton';import DeleteIcon from'@mui/icons-material/Delete';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const NoteContent=_ref=>{let{notes,updateNote,deleteNote}=_ref;const{id}=useParams();const[note,setNote]=useState(null);const[title,setTitle]=useState('');const[content,setContent]=useState('');const[ct,setCt]=useState('');const[ut,setUt]=useState('');const[isSaving,setIsSaving]=useState(false);const timeoutRef=useRef(null);const navigate=useNavigate();useEffect(()=>{const foundNote=notes.find(n=>n.id===id);// console.log(\"Found id: \" + foundNote.id);\n// console.log(\"Found:\" + foundNote.content);\nif(foundNote){setNote(foundNote);setTitle(foundNote.title);setContent(foundNote.content);setCt(foundNote.createTime);setUt(foundNote.updateTime);// console.log(\"ct in add: \" + ct)\n// console.log(\"ut in add: \" + ut)\n}},[id,notes]);useEffect(()=>{if(isSaving){const saveNote=()=>{const d=new Date();updateNote(id,{id,title,content,createTime:ct,updateTime:d.toLocaleDateString()});setUt(d.toLocaleDateString());setIsSaving(false);};if(timeoutRef.current){clearTimeout(timeoutRef.current);}timeoutRef.current=setTimeout(saveNote,1000);}},[isSaving,id,title,content,ct,updateNote]);useEffect(()=>{return()=>{if(timeoutRef.current){clearTimeout(timeoutRef.current);}};},[]);const handleTitleChange=e=>{setTitle(e.target.value);setNote({...note,title:e.target.value});setIsSaving(true);};const handleContentChange=e=>{setContent(e.target.value);setNote({...note,content:e.target.value});setIsSaving(true);};// const handleSave = () => {\n//     updateNote(id, { ...note, title, content });\n//     navigate('/');\n// };\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"note-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"noteInfo\",children:[title,/*#__PURE__*/_jsxs(\"span\",{className:\"timeInfo\",children:[\"\\u521B\\u5EFA\\u65F6\\u95F4\\uFF1A\",ct]}),/*#__PURE__*/_jsxs(\"span\",{className:\"timeInfo\",children:[\"\\u4FEE\\u6539\\u65F6\\u95F4\\uFF1A\",ut]}),/*#__PURE__*/_jsx(\"span\",{className:\"deleteIcon\",children:/*#__PURE__*/_jsx(IconButton,{edge:\"end\",\"aria-label\":\"delete\",onClick:()=>{deleteNote(id);navigate(\"/\");},children:/*#__PURE__*/_jsx(DeleteIcon,{})})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title// onChange={(e) => setTitle(e.target.value)}\n,onChange:handleTitleChange,className:\"noteCaption\"}),/*#__PURE__*/_jsx(\"textarea\",{value:content// onChange={(e) => setContent(e.target.value)}\n,onChange:handleContentChange,className:\"noteContent\"})]});};export default NoteContent;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","IconButton","DeleteIcon","jsxs","_jsxs","jsx","_jsx","NoteContent","_ref","notes","updateNote","deleteNote","id","note","setNote","title","setTitle","content","setContent","ct","setCt","ut","setUt","isSaving","setIsSaving","timeoutRef","navigate","foundNote","find","n","createTime","updateTime","saveNote","d","Date","toLocaleDateString","current","clearTimeout","setTimeout","handleTitleChange","e","target","value","handleContentChange","className","children","edge","onClick","type","onChange"],"sources":["/Users/augustus/Desktop/前端面试准备/note-manager/src/components/NoteContent.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport IconButton from '@mui/material/IconButton';\nimport DeleteIcon from '@mui/icons-material/Delete';\n\nconst NoteContent = ({ notes, updateNote, deleteNote }) => {\n    const { id } = useParams();\n\n    const [note, setNote] = useState(null);\n\n    const [title, setTitle] = useState('');\n    const [content, setContent] = useState('');\n    const [ct, setCt] = useState('');\n    const [ut, setUt] = useState('');\n\n    const [isSaving, setIsSaving] = useState(false);\n\n    const timeoutRef = useRef(null);\n\n    const navigate = useNavigate();\n\n\n    useEffect(() => {\n        const foundNote = notes.find(n => n.id === id);\n        // console.log(\"Found id: \" + foundNote.id);\n        // console.log(\"Found:\" + foundNote.content);\n        if (foundNote) {\n            setNote(foundNote);\n            setTitle(foundNote.title);\n            setContent(foundNote.content);\n            setCt(foundNote.createTime);\n            setUt(foundNote.updateTime);\n            // console.log(\"ct in add: \" + ct)\n            // console.log(\"ut in add: \" + ut)\n        }\n    }, [id, notes]);\n\n    useEffect(() => {\n        if (isSaving) {\n            const saveNote = () => {\n                const d = new Date();\n                updateNote(id, {\n                    id,\n                    title,\n                    content,\n                    createTime: ct,\n                    updateTime: d.toLocaleDateString()\n                });\n                setUt(d.toLocaleDateString());\n                setIsSaving(false);\n            };\n\n            if (timeoutRef.current) {\n                clearTimeout(timeoutRef.current);\n            }\n\n            timeoutRef.current = setTimeout(saveNote, 1000);\n        }\n    }, [isSaving, id, title, content, ct, updateNote]);\n\n    useEffect(() => {\n        return () => {\n            if (timeoutRef.current) {\n                clearTimeout(timeoutRef.current);\n            }\n        };\n    }, []);\n\n\n    const handleTitleChange = (e) => {\n        setTitle(e.target.value);\n        setNote({\n            ...note,\n            title: e.target.value,\n          });\n        setIsSaving(true);\n    };\n\n    const handleContentChange = (e) => {\n        setContent(e.target.value);\n        setNote({\n            ...note,\n            content: e.target.value,\n          });\n        setIsSaving(true);\n    };\n\n\n\n    // const handleSave = () => {\n    //     updateNote(id, { ...note, title, content });\n    //     navigate('/');\n    // };\n\n    return (\n        <div className=\"note-content\">\n            <div className=\"noteInfo\">\n                {title} \n                <span className=\"timeInfo\">创建时间：{ct}</span>\n                <span className=\"timeInfo\">修改时间：{ut}</span> \n                <span className=\"deleteIcon\"> \n                    <IconButton edge=\"end\" aria-label=\"delete\" onClick={() => {\n                        deleteNote(id)\n                        navigate(`/`)\n                    }} >\n                    <DeleteIcon />\n                    </IconButton> \n                </span>\n            </div>\n            <input\n                type=\"text\"\n                value={title}\n                // onChange={(e) => setTitle(e.target.value)}\n                onChange={handleTitleChange}\n                className=\"noteCaption\"\n            />\n\n\n            <textarea\n                value={content}\n                // onChange={(e) => setContent(e.target.value)}\n                onChange={handleContentChange}\n                className=\"noteContent\"\n            />\n        {/* <button onClick={handleSave}>保存</button>\n        <button onClick={() => navigate('/')}>取消</button> */}\n        </div>\n    );\n    };\n\nexport default NoteContent;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,UAAU,KAAM,4BAA4B,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAEpD,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAAuC,IAAtC,CAAEC,KAAK,CAAEC,UAAU,CAAEC,UAAW,CAAC,CAAAH,IAAA,CAClD,KAAM,CAAEI,EAAG,CAAC,CAAGb,SAAS,CAAC,CAAC,CAE1B,KAAM,CAACc,IAAI,CAAEC,OAAO,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAEtC,KAAM,CAACmB,KAAK,CAAEC,QAAQ,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACqB,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACuB,EAAE,CAAEC,KAAK,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CAChC,KAAM,CAACyB,EAAE,CAAEC,KAAK,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAEhC,KAAM,CAAC2B,QAAQ,CAAEC,WAAW,CAAC,CAAG5B,QAAQ,CAAC,KAAK,CAAC,CAE/C,KAAM,CAAA6B,UAAU,CAAG3B,MAAM,CAAC,IAAI,CAAC,CAE/B,KAAM,CAAA4B,QAAQ,CAAG1B,WAAW,CAAC,CAAC,CAG9BH,SAAS,CAAC,IAAM,CACZ,KAAM,CAAA8B,SAAS,CAAGlB,KAAK,CAACmB,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACjB,EAAE,GAAKA,EAAE,CAAC,CAC9C;AACA;AACA,GAAIe,SAAS,CAAE,CACXb,OAAO,CAACa,SAAS,CAAC,CAClBX,QAAQ,CAACW,SAAS,CAACZ,KAAK,CAAC,CACzBG,UAAU,CAACS,SAAS,CAACV,OAAO,CAAC,CAC7BG,KAAK,CAACO,SAAS,CAACG,UAAU,CAAC,CAC3BR,KAAK,CAACK,SAAS,CAACI,UAAU,CAAC,CAC3B;AACA;AACJ,CACJ,CAAC,CAAE,CAACnB,EAAE,CAAEH,KAAK,CAAC,CAAC,CAEfZ,SAAS,CAAC,IAAM,CACZ,GAAI0B,QAAQ,CAAE,CACV,KAAM,CAAAS,QAAQ,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAAC,CAAC,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACpBxB,UAAU,CAACE,EAAE,CAAE,CACXA,EAAE,CACFG,KAAK,CACLE,OAAO,CACPa,UAAU,CAAEX,EAAE,CACdY,UAAU,CAAEE,CAAC,CAACE,kBAAkB,CAAC,CACrC,CAAC,CAAC,CACFb,KAAK,CAACW,CAAC,CAACE,kBAAkB,CAAC,CAAC,CAAC,CAC7BX,WAAW,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,GAAIC,UAAU,CAACW,OAAO,CAAE,CACpBC,YAAY,CAACZ,UAAU,CAACW,OAAO,CAAC,CACpC,CAEAX,UAAU,CAACW,OAAO,CAAGE,UAAU,CAACN,QAAQ,CAAE,IAAI,CAAC,CACnD,CACJ,CAAC,CAAE,CAACT,QAAQ,CAAEX,EAAE,CAAEG,KAAK,CAAEE,OAAO,CAAEE,EAAE,CAAET,UAAU,CAAC,CAAC,CAElDb,SAAS,CAAC,IAAM,CACZ,MAAO,IAAM,CACT,GAAI4B,UAAU,CAACW,OAAO,CAAE,CACpBC,YAAY,CAACZ,UAAU,CAACW,OAAO,CAAC,CACpC,CACJ,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAGN,KAAM,CAAAG,iBAAiB,CAAIC,CAAC,EAAK,CAC7BxB,QAAQ,CAACwB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CACxB5B,OAAO,CAAC,CACJ,GAAGD,IAAI,CACPE,KAAK,CAAEyB,CAAC,CAACC,MAAM,CAACC,KAClB,CAAC,CAAC,CACJlB,WAAW,CAAC,IAAI,CAAC,CACrB,CAAC,CAED,KAAM,CAAAmB,mBAAmB,CAAIH,CAAC,EAAK,CAC/BtB,UAAU,CAACsB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC1B5B,OAAO,CAAC,CACJ,GAAGD,IAAI,CACPI,OAAO,CAAEuB,CAAC,CAACC,MAAM,CAACC,KACpB,CAAC,CAAC,CACJlB,WAAW,CAAC,IAAI,CAAC,CACrB,CAAC,CAID;AACA;AACA;AACA;AAEA,mBACIpB,KAAA,QAAKwC,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzBzC,KAAA,QAAKwC,SAAS,CAAC,UAAU,CAAAC,QAAA,EACpB9B,KAAK,cACNX,KAAA,SAAMwC,SAAS,CAAC,UAAU,CAAAC,QAAA,EAAC,gCAAK,CAAC1B,EAAE,EAAO,CAAC,cAC3Cf,KAAA,SAAMwC,SAAS,CAAC,UAAU,CAAAC,QAAA,EAAC,gCAAK,CAACxB,EAAE,EAAO,CAAC,cAC3Cf,IAAA,SAAMsC,SAAS,CAAC,YAAY,CAAAC,QAAA,cACxBvC,IAAA,CAACL,UAAU,EAAC6C,IAAI,CAAC,KAAK,CAAC,aAAW,QAAQ,CAACC,OAAO,CAAEA,CAAA,GAAM,CACtDpC,UAAU,CAACC,EAAE,CAAC,CACdc,QAAQ,IAAI,CAAC,CACjB,CAAE,CAAAmB,QAAA,cACFvC,IAAA,CAACJ,UAAU,GAAE,CAAC,CACF,CAAC,CACX,CAAC,EACN,CAAC,cACNI,IAAA,UACI0C,IAAI,CAAC,MAAM,CACXN,KAAK,CAAE3B,KACP;AAAA,CACAkC,QAAQ,CAAEV,iBAAkB,CAC5BK,SAAS,CAAC,aAAa,CAC1B,CAAC,cAGFtC,IAAA,aACIoC,KAAK,CAAEzB,OACP;AAAA,CACAgC,QAAQ,CAAEN,mBAAoB,CAC9BC,SAAS,CAAC,aAAa,CAC1B,CAAC,EAGD,CAAC,CAEV,CAAC,CAEL,cAAe,CAAArC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}